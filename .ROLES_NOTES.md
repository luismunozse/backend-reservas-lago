# Roles de administración (borrador)

Actualmente existen dos tipos de usuarios administrativos diferenciados por el campo `role` de la entidad `User` (`users.role`):

- `ADMIN`  
  - Puede acceder a **todos** los endpoints `/api/admin/**`, incluyendo la gestión de usuarios (`/api/admin/users/**`).
- `MANAGER` (admin limitado)  
  - Puede acceder a los endpoints administrativos generales:
    - Gestión de reservas: confirmar / cancelar, listar, exportar.
    - Configuración de capacidad (`/api/admin/availability/**`).
    - Configuración de reservas educativas (`/api/admin/config/educational-reservations`).
  - **No** puede acceder a `/api/admin/users/**` (creación/edición/eliminación de usuarios).

## Configuración en `SecurityConfig`

```java
.requestMatchers("/api/admin/users/**").hasRole("ADMIN")
.requestMatchers("/api/admin/**").hasAnyRole("ADMIN", "MANAGER")
```

Como la entidad `User` implementa `UserDetails` y devuelve la autoridad como `"ROLE_" + role`, para crear un admin limitado basta con insertar un usuario con:

- `role = 'MANAGER'`

Ejemplo SQL aproximado:

```sql
INSERT INTO users (email, password, role, enabled, first_name, last_name)
VALUES (
  'manager@lago-escondido.com',
  '<password_bcrypt>',
  'MANAGER',
  true,
  'Admin',
  'Limitado'
);
```

> Nota: la contraseña debe estar hasheada con BCrypt, usando el mismo encoder que el backend (`BCryptPasswordEncoder`).*** End Patch***  ಆಸ್ಪತ್ರ  ***!
